{% extends 'dashboard.html' %} {% block content %}
<h2>Nueva Acta</h2>
<section class="administrator_act">
  <form method="POST" enctype="multipart/form-data" class="form">
    {% csrf_token %} {% for field in form %}
    <div class="form_group">
      <label for="{{ field.id_for_label }}">{{ field.label }}</label>
      {{ field }} {% for error in field.errors %}
      <span class="error">{{ error }}</span>
      {% endfor %}
    </div>
    {% endfor %}
    <div class="form_group">
      <button type="submit" class="button_send">Enviar</button>
    </div>
  </form>
</section>
{% endblock content %} {% block extrajs %}
<script>
  $(document).ready(function () {
    var committeeSelect = $("#id_committee");
    var actSelect = $("#id_type");

    // Obtener las opciones de acta disponibles para cada comité
    var actOptionsByCommittee = {
      1: [1, 3], // Opciones de acta para el Comité 1
      2: [2], // Opción de acta para el Comité 2
    };

    // Función para cargar las opciones de acta según el comité seleccionado
    function loadActOptions(committeeId) {
      // Limpiar el select de acta
      actSelect.empty();

      // Obtener las opciones de acta correspondientes al comité seleccionado
      var options = actOptionsByCommittee[committeeId] || [];

      // Crear y añadir las opciones al select de acta
      options.forEach(function (actId) {
        var optionElement = $("<option></option>")
          .attr("value", actId)
          .text("Acta " + actId);
        actSelect.append(optionElement);
      });
    }

    // Evento de cambio en el select de comité
    committeeSelect.on("change", function () {
      var committeeId = $(this).val();
      loadActOptions(committeeId);
    });

    // Inicializar las opciones de acta según el comité seleccionado inicialmente
    var initialCommitteeId = committeeSelect.val();
    loadActOptions(initialCommitteeId);
  });
</script>

{% endblock extrajs %}
